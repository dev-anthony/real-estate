<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Properties</title>
    <style>
        
.house-section{
    
    padding: 10px 15px;
    
    text-align:center;
    
}
.house-list{
    display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
}
.house-card{
    background-color: #fff;
    /* padding: 10px; */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow:hidden;
    transition: transform 0.3s ease;
    border-radius: 12px;
    padding:10px;
}
.image-container{
    overflow:hidden;
}
.house-card img{
    border-radius: 12px;
    width: 100%;
    height: 150px;
     object-fit: cover;
     transition: transform .5s ease;
     overflow: hidden;
 }
 .house-card img:hover{
    transform: scale(1.1);
    overflow: hidden;
}
.details{
    font-size:12px;
    margin-bottom: 10px;
    /* margin-top:10px; */
}
.card-contents{
    padding: 5px;
}
.card-contents h3{
    font-size:14px;
    margin-right: 10px; 
}
.card-contents .price{
    font-size:14px;
    color:#000000;
    font-weight:bold;
    /* margin-bottom: 10px; */
}
.card-contents .flex{
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom:20px;
}
.card-contents a{
    margin:10px;
    text-decoration: none;
    color: black;
}
.topbar {
    background: #fff;
    padding: 10px;
    /* border-radius: 10px; */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    /* margin-bottom: 20px; */
  
    display:flex;
    justify-content: space-between;
    align-items: center;

}
.search-bar input {
    width: 100%;
    padding: 10px 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 14px;
}
.topbar button{
    background-color: #7A5AF8;
    padding: 5px 10px;
    text-decoration: none;
    color:white;
    border:none;
    border-radius: 5px;
  
}
/* .search-bar-button-con{
    display: flex;
    gap:1em;
    justify-content: space-between;
} */
    </style>
</head>
<body>
    <div class="topbar">
       
        <div class="search-bar">
            <input  id="searchInput" type="text" placeholder="Search properties..." />
        </div>
        <button id="search-btn">Search</button>
       
        
    </div>
    <div class="house-section">
        <div class="house-list" id="house-list"></div>
        </div>
        <script>
            
  let houseData = [];

fetch("/Authentication/backend/get-houses.php")
  .then(res => res.json())
  .then(houses => {
    houseData = houses;
    displayHouses(houseData);
  });

function displayHouses(houses) {
  const container = document.getElementById("house-list");
  container.innerHTML = "";

  if (!houses.length) {
    container.innerHTML = "No houses available at the moment";
    return;
  }

  houses.forEach(house => {
    const card = document.createElement('div');
    card.className = 'house-card';
    card.innerHTML = `
      <div class="image-container">
      <img src="/Authentication/assets/${house.image}" alt="House image" >
      </div>
      <div class="card-contents">
      <div class="flex">
      <h3>${house.title}, ${house.location}</h3>
      <span class="price">$${house.price}</span>
      </div>
      <p class="details">${house.description}</p>
      </div>
    `;
    container.appendChild(card);
  });
}

function filterHouses() {
  const query = document.getElementById("searchInput").value.toLowerCase();
  const filtered = houseData.filter(house => 
    house.location.toLowerCase().includes(query) ||
    house.title.toLowerCase().includes(query) ||
    house.price.toLowerCase().includes(query)
  );

  displayHouses(filtered); // âœ… Actually display the filtered results
}
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("search-btn").addEventListener("click", ()=>{
    document.getElementById("searchInput").value = "";
    filterHouses
  });
  document.getElementById("searchInput").addEventListener("input", filterHouses);
});

        </script>
</body>
</html>